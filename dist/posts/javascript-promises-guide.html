<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta content="320" name="MobileOptimized">
  <meta content="gdi" http-equiv="X-UA-TextLayoutMetrics">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="#009EDD" name="theme-color">
  <meta name="HandheldFriendly" content="true"/>
  <meta content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport">
  <title>Javascript promises guide: using async await | Web Developer&#39;s Thoughts</title>
  <meta name="description" content="A guide about javascript promises: what they are and how to use them effectively with async await.">
  <meta name="keywords" content="promises async await guide tutorial javascript ecmascript6 es6">
  <meta name="author" content="Giovanni Rodighiero">

  <meta property="og:title" content="Javascript promises guide: using async await | Web Developer&#39;s Thoughts" />
  <meta property="og:description" content="A guide about javascript promises: what they are and how to use them effectively with async await." />
  <meta property="og:type" content="blog" />
  <meta property="og:url" content="localhost:3000/posts/const-and-let-variables.html" />
  <meta property="og:image" content="localhost:3000/images/homepage-hero_v1.jpg" />

  <link rel="stylesheet" href="/main.css">

  <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.js"></script>
  <![endif]-->
</head>

<body>
  
  <header class="site-header">
  <div class="site-header__left">
    <p class="site-header__title">
      <a href="/" class="site-header__logo-link">
        Web developer&#39;s thoughts
      </a>
    </p>
    <a href="/" class="site-header__logo-link">
      <abbr title="Web developer&#39;s thoughts" class="site-header__short-title">W.D.T.</abbrp>
    </a>
  </div>
  <nav class="site-nav">
    <ul class="site-nav__list">
      
        
          <li class="site-nav__list-item">
            <a class="site-nav__link" href="/en/posts.html">Posts</a>
          </li>
        
      
        
          <li class="site-nav__list-item">
            <a class="site-nav__link" href="/en/about.html">About</a>
          </li>
        
      
    </ul>
  </nav>
</header>

  <main>
    
  <article>
    <ol itemscope itemtype="http://schema.org/BreadcrumbList" class="breadcrumbs">
      <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem" class="breadcrumbs__item">
        <a itemprop="item" href="/" class="breadcrumbs__link">
          <span itemprop="name">Home</span></a>
        <span itemprop="position" content="1">&gt;</span>
      </li>
      <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem" class="breadcrumbs__item">
        <a itemprop="item" href="/en/posts.html" class="breadcrumbs__link">
          <span itemprop="name">Posts</span></a>
        <span itemprop="position" content="2">&gt;</span>
      </li>
      <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem" class="breadcrumbs__item">
        <a itemprop="item" href="/posts/javascript-promises-guide" class="breadcrumbs__link">
          <span itemprop="name">Javascript promises guide: using async await</span>
        </a>
      </li>
    </ol>
    <section class="post-hero">
  <h1 class="post-hero__title">Javascript promises guide: using async await</h1>
  <h2 class="post-hero__subtitle">A guide about javascript promises, what they are and how to use them effectively with async await.</h2>
</section>
    <section class="post">
  
    <h3>Introduction</h3>
  
    <p>If you are writing javascript you already know keeping your code asynchronous is a must and sometimes achieving this can be very painful, specially if you need to impose a specific order among your async functions.</p>
  
    <p>There are some modules out there that handle this for you, <a href="https://github.com/caolan/async" target="_blank">async</a> for instance, if you like the "callback" approach, but there is another way to achieve asynchronous programming without making a mess: Promises !</p>
  
    <p>A promise is an async function that lets you specify what to do if everything goes as planned and what to do otherwise. <br> Here's a simple promise:</p>
  
    <pre><code class="javascript post__code">
      const myPromise = new Promise(function (resolve, reject) {
        // ... doing my stuff
        if (true)
          return resolve('ok');
        return reject('error');
      });
    </pre></code>
    <p class="post__caption">Base promise.</p>
  
    <p>As you can see <code>Promise()</code> takes a function as its only argument, this function in turn has two arguments:
      <ul>
        <li><code>resolve</code>: a function to call if the promise should succeed;</li>
        <li><code>reject</code>: a function to call if the promise should fail.</li>
      </ul>
    </p>
  
    <p>In the previous example the promise will succeed, of course, and will return the string 'ok'. Now here's how to use that promise:</p>
  
    <pre><code class="javascript post__code">
      const myPromise = new Promise(function (resolve, reject) {
        // ... doing my stuff
        if (true)
          return resolve('ok');
        return reject('error');
      });

      myPromise.then(function(result) {
        console.log('promise done', result);
      });
      console.log('reference');

    </pre></code>
    <p class="post__caption">Using the base promise.</p>
  
    <p>A promise instance exposes a <code>then(succeedCallback, failureCallback)</code> function to handle the results of the promise once it has finished, it takes two callbacks: one is used in case of a succeed promise, the other in case of a failed one. <br> If we run the code above it will <u>probably</u> log 'reference' first and then 'promise done ok', this because the promise is asynchronous so the code above does not wait for it to be executed.</p>
  
    <p>Now let's change the example a bit to make it more flexible:</p>
  
    <pre><code class="javascript post__code">
      const myPromise = function(shouldSucceed) {
        return new Promise(function (resolve, reject) {
          if (shouldSucceed)
            return resolve('ok');
          return reject('error');
        });
      };
      myPromise(true).then(function(result) {
        console.log('first promise done', result);
      });
      myPromise(false).then(null, function(error) {
        console.log('second promise done', error);
      });
      console.log('reference');
    </pre></code>
    <p class="post__caption">Improving the example.</p>
  
    <p>This time the order of the results is not predictable, probably 'reference' will be the first thing printed, but it is wrong to make this kind of assumptions truth be told.</p>
  
    <p>We can still improve the promise handling with another function, <code>catch(failureCallback)</code>, also provided by every promise instance, it takes a callback to execute in case of a failure just like <code>then()</code> does for a success. You can use it like this:</p>
  
    <pre><code class="javascript post__code">
      const myPromise = function(shouldSucceed) {
        return new Promise(function (resolve, reject) {
          if (shouldSucceed)
            return resolve('ok');
          return reject('error');
        });
      };

      myPromise(true).then(function(result) {
        console.log('first promise done', result);
      });

      myPromise(false)
        .then(function(result) {
          console.log('second promise done', result);
        })
        .catch(function(error) {
          console.log('second promise done', error);
        });
      console.log('reference');
    </pre></code>
    <p class="post__caption">Using catch function.</p>
  
    <p>This last syntax, with <code>then()</code> for handling the success callback and <code>catch()</code> for the failure one, is most popular and easy to read in my opinion and the one I suggest you to use.</p>
  
    <p></p>
  
</section>
    <section class="post-footer">
  <p class="post-footer__signature">Posted by <a href="/about.html">Giovanni Rodighiero</a> on <time class="preview__date" datetime="2017-05-19T20:46:35+02:00">19 May 2017</time></p>
</section>
  </article>

  </main>
  
    <footer class="footer">
  <ul class="footer-sitemap">
    
      <li class="footer-sitemap__item">
        <a class="footer-sitemap__link" href="/">Homepage</a>
      </li>
    
      <li class="footer-sitemap__item">
        <a class="footer-sitemap__link" href="/en/posts.html">Posts</a>
      </li>
    
      <li class="footer-sitemap__item">
        <a class="footer-sitemap__link" href="/en/about.html">About me</a>
      </li>
    
  </ul>

  <ul class="footer-policies">
    <li class="footer-policies__item">
      <a href="#" class="footer-policies__link">Privacy policy</a>
    </li>
  </ul>
  <div class="footer__signature">
    <p></p>
  </div>
</footer>
  

  <script src="/bundle.js"></script>
</body>
</html>